<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.108.0">
    <meta name="description" content="Overwatch Documentation">
<meta name="author" content="Daniel Tomes -- DatabricksLabs">

    <link rel="icon" href="https://databrickslabs.github.io/overwatch/images/favicon.png" type="image/png">

    <title>Configuration (Legacy) :: Overwatch</title>

    
    <link href="https://databrickslabs.github.io/overwatch/css/nucleus.css?1682437462" rel="stylesheet">
    <link href="https://databrickslabs.github.io/overwatch/css/fontawesome-all.min.css?1682437462" rel="stylesheet">
    <link href="https://databrickslabs.github.io/overwatch/css/hybrid.css?1682437462" rel="stylesheet">
    <link href="https://databrickslabs.github.io/overwatch/css/featherlight.min.css?1682437462" rel="stylesheet">
    <link href="https://databrickslabs.github.io/overwatch/css/perfect-scrollbar.min.css?1682437462" rel="stylesheet">
    <link href="https://databrickslabs.github.io/overwatch/css/auto-complete.css?1682437462" rel="stylesheet">
    <link href="https://databrickslabs.github.io/overwatch/css/atom-one-dark-reasonable.css?1682437462" rel="stylesheet">
    <link href="https://databrickslabs.github.io/overwatch/css/theme.css?1682437462" rel="stylesheet">
    <link href="https://databrickslabs.github.io/overwatch/css/hugo-theme.css?1682437462" rel="stylesheet">
    
    <link href="https://databrickslabs.github.io/overwatch/css/theme-blue.css?1682437462" rel="stylesheet">
    
    

    <script src="https://databrickslabs.github.io/overwatch/js/jquery-3.3.1.min.js?1682437462"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    

<script async defer src="https://buttons.github.io/buttons.js"></script>
  </head>
  <body class="" data-url="https://databrickslabs.github.io/overwatch/deployoverwatch/configureoverwatch/configurationlegacy/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://databrickslabs.github.io/overwatch/">
    <img src="https://databrickslabs.github.io/overwatch/images/tmp_logo4.png", width="85%">
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="https://databrickslabs.github.io/overwatch/js/lunr.min.js?1682437462"></script>
<script type="text/javascript" src="https://databrickslabs.github.io/overwatch/js/auto-complete.js?1682437462"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/databrickslabs.github.io\/overwatch\/";
    
</script>
<script type="text/javascript" src="https://databrickslabs.github.io/overwatch/js/search.js?1682437462"></script>

    
  </div>
  
  <section id="homelinks">
    <ul>
      <li>
        <a class="padding" href='https://databrickslabs.github.io/overwatch/'><i class='fas fa-home'></i> Home</a>
      </li>
    </ul>
  </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/deployoverwatch/" title="Deploy Overwatch" class="dd-item
        parent
        
        
        ">
      <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/">
          Deploy Overwatch
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/deployoverwatch/cloudinfra/" title="Cloud Infrastructure" class="dd-item
        
        
        
        ">
      <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/cloudinfra/">
          Cloud Infrastructure
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/cloudinfra/azure/" title="Azure" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/cloudinfra/azure/">
        Azure
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/cloudinfra/aws/" title="AWS/GCP" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/cloudinfra/aws/">
        AWS/GCP
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/deployoverwatch/configureoverwatch/" title="Configure Overwatch" class="dd-item
        parent
        
        
        ">
      <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/configureoverwatch/">
          Configure Overwatch
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/configureoverwatch/configuration/" title="Configuration" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/configureoverwatch/configuration/">
        Configuration
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/configureoverwatch/customcosts/" title="Custom Costs" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/configureoverwatch/customcosts/">
        Custom Costs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/configureoverwatch/securityconsiderations/" title="Security Considerations" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/configureoverwatch/securityconsiderations/">
        Security Considerations
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/configureoverwatch/validation/" title="Validation" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/configureoverwatch/validation/">
        Validation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/configureoverwatch/configurationlegacy/" title="Configuration (Legacy)" class="dd-item active">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/configureoverwatch/configurationlegacy/">
        Configuration (Legacy)
        
        </a>
    </li>
     
  
 

            
          
            
            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/deployoverwatch/runningoverwatch/" title="Running Overwatch" class="dd-item
        
        
        
        ">
      <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/runningoverwatch/">
          Running Overwatch
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/runningoverwatch/clusterconfig/" title="Cluster Configuration" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/runningoverwatch/clusterconfig/">
        Cluster Configuration
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/runningoverwatch/notebook/" title="As A Notebook" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/runningoverwatch/notebook/">
        As A Notebook
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/runningoverwatch/jar/" title="As A JAR" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/runningoverwatch/jar/">
        As A JAR
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/runningoverwatch/notebooklegacy/" title="As A Notebook (Legacy)" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/runningoverwatch/notebooklegacy/">
        As A Notebook (Legacy)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/runningoverwatch/jarlegacy/" title="As A JAR (Legacy)" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/runningoverwatch/jarlegacy/">
        As A JAR (Legacy)
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/sharingoverwatch/" title="Sharing Overwatch Data" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/sharingoverwatch/">
        Sharing Overwatch Data
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/deployoverwatch/ucedeployment/" title="Deploying To Unity Catalog" class="dd-item
        
        
        
        ">
      <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/ucedeployment/">
          Deploying To Unity Catalog
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/deployoverwatch/ucedeployment/cloudstorageaccessrequirements/" title="UC Storage Requirements" class="dd-item
        
        
        
        ">
      <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/ucedeployment/cloudstorageaccessrequirements/">
          UC Storage Requirements
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/ucedeployment/cloudstorageaccessrequirements/aws/" title="AWS" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/ucedeployment/cloudstorageaccessrequirements/aws/">
        AWS
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/ucedeployment/cloudstorageaccessrequirements/azure/" title="Azure" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/ucedeployment/cloudstorageaccessrequirements/azure/">
        Azure
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/ucedeployment/cloudstorageaccessrequirements/gcp/" title="GCP" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/ucedeployment/cloudstorageaccessrequirements/gcp/">
        GCP
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/ucedeployment/uceprereqs/" title="UC Pre-Requisites" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/ucedeployment/uceprereqs/">
        UC Pre-Requisites
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/ucedeployment/uceconfiguration/" title="UC Configuration Details" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/ucedeployment/uceconfiguration/">
        UC Configuration Details
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployoverwatch/ucedeployment/migratingtouc/" title="Migrating To UC" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/ucedeployment/migratingtouc/">
        Migrating To UC
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/dataengineer/" title="Data Engineering" class="dd-item
        
        
        
        ">
      <a href="https://databrickslabs.github.io/overwatch/dataengineer/">
          Data Engineering
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/dataengineer/definitions/" title="Data Dictionary (Latest)" class="dd-item
        
        
        
        ">
      <a href="https://databrickslabs.github.io/overwatch/dataengineer/definitions/">
          Data Dictionary (Latest)
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/dataengineer/definitions/061x/" title="Data Dictionary - 0.6.1.x" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/dataengineer/definitions/061x/">
        Data Dictionary - 0.6.1.x
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dataengineer/modules/" title="Modules / Scopes" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/dataengineer/modules/">
        Modules / Scopes
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dataengineer/pipeline_management/" title="Pipeline_Management" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/dataengineer/pipeline_management/">
        Pipeline_Management
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dataengineer/upgrade/" title="Upgrades" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/dataengineer/upgrade/">
        Upgrades
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dataengineer/productionizing/" title="Productionizing" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/dataengineer/productionizing/">
        Productionizing
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dataengineer/advancedtopics/" title="AdvancedTopics" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/dataengineer/advancedtopics/">
        AdvancedTopics
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/changelog/" title="ChangeLog" class="dd-item
        
        
        
        ">
      <a href="https://databrickslabs.github.io/overwatch/changelog/">
          ChangeLog
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/faq/" title="FAQ" class="dd-item
        
        
        
        ">
      <a href="https://databrickslabs.github.io/overwatch/faq/">
          FAQ
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/troubleshooting/" title="Troubleshooting" class="dd-item
        
        
        
        ">
      <a href="https://databrickslabs.github.io/overwatch/troubleshooting/">
          Troubleshooting
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/contributing/" title="" class="dd-item
        
        
        
        ">
      <a href="https://databrickslabs.github.io/overwatch/contributing/">
          
          
      </a>
      
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="footer">
      <center>

    
    <a class="github-button" href="https://github.com/databrickslabs/overwatch/subscription"
       data-icon="octicon-eye" data-show-count="true" aria-label="Watch Overwatch on GitHub">Watch</a>


    <a class="github-button" href="https://github.com/databrickslabs/overwatch" data-icon="octicon-star" data-show-count="true" aria-label="Star databrickslabs/overwatch on GitHub">Star</a>


    <a class="github-button" href="https://github.com/databrickslabs/overwatch/fork"
       data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork Overwatch on GitHub">Fork</a>

    <p>A <a href="https://www.databricks.com/learn/labs">Databricks Labs</a> project.</p>
</center>

<script async defer src="https://buttons.github.io/buttons.js"></script>
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='https://databrickslabs.github.io/overwatch/'>Welcome To OverWatch</a> > <a href='https://databrickslabs.github.io/overwatch/deployoverwatch/'>Deploy Overwatch</a> > <a href='https://databrickslabs.github.io/overwatch/deployoverwatch/configureoverwatch/'>Configure Overwatch</a> > Configuration (Legacy)
          
        
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#configuration-basics">Configuration Basics</a></li>
    <li><a href="#config-examples">Config Examples</a>
      <ul>
        <li><a href="#azure-example">Azure Example</a></li>
        <li><a href="#aws-example">AWS Example</a></li>
        <li><a href="#simplifying-the-config">Simplifying the Config</a></li>
        <li><a href="#overwatchparams">OverwatchParams</a></li>
        <li><a href="#auditlogconfig">AuditLogConfig</a></li>
        <li><a href="#tokensecret">TokenSecret</a></li>
        <li><a href="#datatarget">DataTarget</a></li>
        <li><a href="#azureauditlogeventhubconfig">AzureAuditLogEventhubConfig</a></li>
        <li><a href="#databrickscontractprices">DatabricksContractPrices</a></li>
        <li><a href="#intelligentscaling">IntelligentScaling</a></li>
        <li><a href="#apienvconfig">ApiEnvConfig</a></li>
        <li><a href="#apiproxyconfig">ApiProxyConfig</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Configuration (Legacy)
            </h1>
          

        



<div class="notices warning" ><p><strong>NEW CUSTOMERS</strong> &ndash; This is a legacy configuration, please use the
<a href="https://databrickslabs.github.io/overwatch/deployoverwatch/">new deployment model</a>.
<strong>EXISTING CUSTOMERS COMING FROM VERSION &lt; 0.7.1.0</strong> As of version 0.7.1.0 Overwatch will begin sunsetting
this &ldquo;legacy&rdquo; deployment method and configuration. Please review the
benefits of the new deployment method and plan to switch to this new deployment method by end of Q3 2023.</p>
</div>

<h2 id="configuration-basics">Configuration Basics</h2>
<p>The Overwatch configuration can be created as a case class of <a href="#overwatchparams">OverwatchParams</a> or as a json string passed into
the main class <code>com.databricks.labs.overwatch.BatchRunner</code>. When passed in as a json string, it is
serialized into an instance of <a href="#overwatchparams">OverwatchParams</a>. This provides strong validation on the input parameters
and strong typing for additional validation options. All configs attempt to be defaulted to a reasonable default
where possible. If a default is set, passing in a value will overwrite the default.</p>
<h2 id="config-examples">Config Examples</h2>
<p>Below are some configurations examples of building the configuration parameters called <em>params</em> which is a variable
set to contain an instance of the class <em>OverwatchParams</em>.</p>
<p>Once the config has been created according to your needs, refer back to the
<a href="https://databrickslabs.github.io/overwatch/deployoverwatch/runningoverwatch/notebooklegacy/#jump-start-notebooks">Getting Started - Run Via Notebook</a> or
<a href="https://databrickslabs.github.io/overwatch/deployoverwatch/runningoverwatch/jarlegacy/#via-main-class">Getting Started - Run Via Main Class</a> section to see how it&rsquo;s can be used
when executing the Overwatch Run.</p>

<div class="notices warning" ><p>The configuration examples below use a data target prefix of <em>/user/hive/warehouse</em>. It is STRONGLY recommended that
a data target with a prefix other than /user/hive/warehouse be used. Even though the tables are external, any
spark database located within the default warehouse will drop all tables (including external) with certain drop database
commands resulting in permanent data loss. This is default behavior and has nothing to do with Overwatch specifically
but it&rsquo;s called out here as a major precaution. If multiple workspaces are to be configured and someone with write
access to this location invokes certain drop database commands, all tables will be permanently deleted for all
workspaces.</p>
</div>

<h3 id="azure-example">Azure Example</h3>
<p>Azure does require an event hub to be set up and referenced in the config as an
<a href="#azureauditlogeventhubconfig">AzureAuditLogEventhubConfig</a>. More details for setting up this Event Hub
can be found in the <a href="https://databrickslabs.github.io/overwatch/deployoverwatch/cloudinfra/azure/">Azure Environment Setup</a> page. An example notebook
can be found <a href="https://databrickslabs.github.io/overwatch/assets/GettingStarted/azure_runner_docs_example.html">here</a>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> com.databricks.labs.overwatch.pipeline.<span style="color:#f92672">{</span><span style="color:#a6e22e">Initializer</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">Bronze</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">Silver</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">Gold</span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> com.databricks.labs.overwatch.utils._
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> storagePrefix <span style="color:#66d9ef">=</span> <span style="color:#f92672">/</span>mnt<span style="color:#f92672">/</span>overwatch_global
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> dataTarget <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">DataTarget</span><span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span>etlDB<span style="color:#f92672">),</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span><span style="color:#e6db74">s&#34;</span><span style="color:#e6db74">${</span>storagePrefix<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>workspaceID<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>etlDB<span style="color:#e6db74">}</span><span style="color:#e6db74">.db&#34;</span><span style="color:#f92672">),</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span><span style="color:#e6db74">s&#34;</span><span style="color:#e6db74">${</span>storagePrefix<span style="color:#e6db74">}</span><span style="color:#e6db74">/global_share&#34;</span><span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span>consumerDB<span style="color:#f92672">),</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span><span style="color:#e6db74">s&#34;</span><span style="color:#e6db74">${</span>storagePrefix<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>workspaceID<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>consumerDB<span style="color:#e6db74">}</span><span style="color:#e6db74">.db&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> tokenSecret <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">TokenSecret</span><span style="color:#f92672">(</span>secretsScope<span style="color:#f92672">,</span> dbPATKey<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Use the format exactly replacing &#34;scope&#34; and &#34;key&#34; with the names of the scope and key where your
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Event Hub connection string is stored.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> ehConnScopeKeyString <span style="color:#66d9ef">=</span> <span style="color:#e6db74">&#34;{{secrets/scope/key}}&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> ehStatePath <span style="color:#66d9ef">=</span> <span style="color:#e6db74">s&#34;</span><span style="color:#e6db74">${</span>storagePrefix<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>workspaceID<span style="color:#e6db74">}</span><span style="color:#e6db74">/ehState&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> badRecordsPath <span style="color:#66d9ef">=</span> <span style="color:#e6db74">s&#34;</span><span style="color:#e6db74">${</span>storagePrefix<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>workspaceID<span style="color:#e6db74">}</span><span style="color:#e6db74">/sparkEventsBadrecords&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> azureLogConfig <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">AzureAuditLogEventhubConfig</span><span style="color:#f92672">(</span>connectionString <span style="color:#66d9ef">=</span> ehConnScopeKeyString<span style="color:#f92672">,</span> eventHubName <span style="color:#66d9ef">=</span> ehName<span style="color:#f92672">,</span> auditRawEventsPrefix <span style="color:#66d9ef">=</span> ehStatePath<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> interactiveDBUPrice <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">0.56</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> automatedDBUPrice <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">0.26</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> <span style="color:#a6e22e">DatabricksSQLDBUPrice</span> <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">0.22</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> automatedJobsLightDBUPrice <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">0.10</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> customWorkspaceName <span style="color:#66d9ef">=</span> workspaceID <span style="color:#75715e">// customize this to a custom name if custom workspace_name is desired
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> params <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">OverwatchParams</span><span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>  auditLogConfig <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">AuditLogConfig</span><span style="color:#f92672">(</span>azureAuditLogEventhubConfig <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span>azureLogConfig<span style="color:#f92672">)),</span>
</span></span><span style="display:flex;"><span>  dataTarget <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span>dataTarget<span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>  tokenSecret <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span>tokenSecret<span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>  badRecordsPath <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span>badRecordsPath<span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>  overwatchScope <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span>scopes<span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>  maxDaysToLoad <span style="color:#66d9ef">=</span> maxDaysToLoad<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>  databricksContractPrices <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">DatabricksContractPrices</span><span style="color:#f92672">(</span>interactiveDBUPrice<span style="color:#f92672">,</span> automatedDBUPrice<span style="color:#f92672">,</span> <span style="color:#a6e22e">DatabricksSQLDBUPrice</span><span style="color:#f92672">,</span> automatedJobsLightDBUPrice<span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>  primordialDateString <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span>primordialDateString<span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>  intelligentScaling <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">IntelligentScaling</span><span style="color:#f92672">(</span>enabled <span style="color:#66d9ef">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">,</span> minimumCores <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">16</span><span style="color:#f92672">,</span> maximumCores <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">64</span><span style="color:#f92672">,</span> coeff <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">1.0</span><span style="color:#f92672">),</span> <span style="color:#75715e">// Until further notice, recommend this to be disabled. Intelligent scaling is being re-examined as of 0.6.1.2
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  workspace_name <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span>customWorkspaceName<span style="color:#f92672">),</span> <span style="color:#75715e">// as of 0.6.0
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  externalizeOptimize <span style="color:#66d9ef">=</span> <span style="color:#66d9ef">false</span> <span style="color:#75715e">// as of 0.6.0
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">)</span>
</span></span></code></pre></div><p><strong>NOTE</strong> The connection string stored in the <em>ehConnScopeKeyString</em> above is stored as a secret since it contains
sensitive information.</p>
<p><strong>THIS IS NOT THE KEY</strong> but the actual connection string from the SAS Policy. To find this follow the path in the
Azure portal below.</p>
<p>eh-namespace &ndash;&gt; eventhub &ndash;&gt; shared access policies &ndash;&gt; Connection String-primary key</p>
<p>The connection string should begin with <code>Endpoint=sb://</code>. Note that the policy only needs the Listen permission</p>
<p><img src="https://databrickslabs.github.io/overwatch/images/GettingStarted/Azure_EH_ConnString.png" alt="ConnStringExample"></p>
<h3 id="aws-example">AWS Example</h3>
<p>An example notebook can be found <a href="https://databrickslabs.github.io/overwatch/assets/GettingStarted/aws_runner_docs_example.html">here</a>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> com.databricks.labs.overwatch.pipeline.<span style="color:#f92672">{</span><span style="color:#a6e22e">Initializer</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">Bronze</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">Silver</span><span style="color:#f92672">,</span> <span style="color:#a6e22e">Gold</span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> com.databricks.labs.overwatch.utils._
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> storagePrefix <span style="color:#66d9ef">=</span> <span style="color:#f92672">/</span>mnt<span style="color:#f92672">/</span>overwatch_global
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> dataTarget <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">DataTarget</span><span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span>etlDB<span style="color:#f92672">),</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span><span style="color:#e6db74">s&#34;</span><span style="color:#e6db74">${</span>storagePrefix<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>workspaceID<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>etlDB<span style="color:#e6db74">}</span><span style="color:#e6db74">.db&#34;</span><span style="color:#f92672">),</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span><span style="color:#e6db74">s&#34;</span><span style="color:#e6db74">${</span>storagePrefix<span style="color:#e6db74">}</span><span style="color:#e6db74">/global_share&#34;</span><span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span>consumerDB<span style="color:#f92672">),</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span><span style="color:#e6db74">s&#34;</span><span style="color:#e6db74">${</span>storagePrefix<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>workspaceID<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>consumerDB<span style="color:#e6db74">}</span><span style="color:#e6db74">.db&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> tokenSecret <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">TokenSecret</span><span style="color:#f92672">(</span>secretsScope<span style="color:#f92672">,</span> dbPATKey<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> badRecordsPath <span style="color:#66d9ef">=</span> <span style="color:#e6db74">s&#34;</span><span style="color:#e6db74">${</span>storagePrefix<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>workspaceID<span style="color:#e6db74">}</span><span style="color:#e6db74">/sparkEventsBadrecords&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> auditSourcePath <span style="color:#66d9ef">=</span> <span style="color:#e6db74">&#34;/path/to/my/workspaces/raw_audit_logs&#34;</span> <span style="color:#75715e">// INPUT: workspace audit log directory
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> interactiveDBUPrice <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">0.56</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> automatedDBUPrice <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">0.26</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> <span style="color:#a6e22e">DatabricksSQLDBUPrice</span> <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">0.22</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> automatedJobsLightDBUPrice <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">0.10</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> customWorkspaceName <span style="color:#66d9ef">=</span> workspaceID <span style="color:#75715e">// customize this to a custom name if custom workspace_name is desired
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> params <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">OverwatchParams</span><span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>  auditLogConfig <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">AuditLogConfig</span><span style="color:#f92672">(</span>rawAuditPath <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span>auditSourcePath<span style="color:#f92672">),</span> auditLogFormat <span style="color:#66d9ef">=</span> <span style="color:#e6db74">&#34;json&#34;</span><span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>  dataTarget <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span>dataTarget<span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>  tokenSecret <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span>tokenSecret<span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>  badRecordsPath <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span>badRecordsPath<span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>  overwatchScope <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span>scopes<span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>  maxDaysToLoad <span style="color:#66d9ef">=</span> maxDaysToLoad<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>  databricksContractPrices <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">DatabricksContractPrices</span><span style="color:#f92672">(</span>interactiveDBUPrice<span style="color:#f92672">,</span> automatedDBUPrice<span style="color:#f92672">,</span> <span style="color:#a6e22e">DatabricksSQLDBUPrice</span><span style="color:#f92672">,</span> automatedJobsLightDBUPrice<span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>  primordialDateString <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span>primordialDateString<span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>  intelligentScaling <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">IntelligentScaling</span><span style="color:#f92672">(</span>enabled <span style="color:#66d9ef">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">,</span> minimumCores <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">16</span><span style="color:#f92672">,</span> maximumCores <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">64</span><span style="color:#f92672">,</span> coeff <span style="color:#66d9ef">=</span> <span style="color:#ae81ff">1.0</span><span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>  workspace_name <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span>customWorkspaceName<span style="color:#f92672">),</span> <span style="color:#75715e">// as of 0.6.0
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  externalizeOptimize <span style="color:#66d9ef">=</span> <span style="color:#66d9ef">false</span> <span style="color:#75715e">// as of 0.6.0
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">)</span>
</span></span></code></pre></div><h3 id="simplifying-the-config">Simplifying the Config</h3>
<p>The simplest configuration possible is one that uses as many defaults as possible.
A config with all defaults is likely just for testing and not sufficient for real-world application. As such, examples
for the complete configs are illustrated above. Reference the defaults below to see which ones you may omit. Note
that if you omit certain configs, their defaults will still be present in the json config.</p>
<h3 id="overwatchparams">OverwatchParams</h3>
<p>The configuration structure required for Overwatch</p>
<table>
<thead>
<tr>
<th style="text-align:left">Config</th>
<th style="text-align:left">Required Override</th>
<th style="text-align:left">Default Value</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">AsOfVersion</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>auditLogConfig</strong></td>
<td style="text-align:left">Y</td>
<td style="text-align:left">NULL</td>
<td style="text-align:left"><a href="#auditlogconfig">AuditLogConfig</a></td>
<td style="text-align:left">0.5.x</td>
<td style="text-align:left">Databricks Audit Log delivery information.</td>
</tr>
<tr>
<td style="text-align:left"><strong>tokenSecret</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">Execution Owner&rsquo;s Token</td>
<td style="text-align:left">Option<a href="#tokensecret">[TokenSecret]</a></td>
<td style="text-align:left">0.5.x</td>
<td style="text-align:left">Secret retrieval information</td>
</tr>
<tr>
<td style="text-align:left"><strong>dataTarget</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">DataTarget(&ldquo;overwatch&rdquo;, &ldquo;/user/hive/warehouse/{databaseName}.db&rdquo;, &ldquo;/user/hive/warehouse/{databaseName}.db&rdquo;)</td>
<td style="text-align:left">Option<a href="#datatarget">[DataTarget]</a></td>
<td style="text-align:left">0.5.x</td>
<td style="text-align:left">What to call the database and where to store it</td>
</tr>
<tr>
<td style="text-align:left"><strong>badRecordsPath</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">/tmp/overwatch/badRecordsPath</td>
<td style="text-align:left">Option[String]</td>
<td style="text-align:left">0.5.x</td>
<td style="text-align:left">When reading the log files, where should Overwatch store the records / files that cannot be parsed. Overwatch must have write permissions to this path</td>
</tr>
<tr>
<td style="text-align:left"><strong>overwatchScope</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">all</td>
<td style="text-align:left">Option[Seq[String]]</td>
<td style="text-align:left">0.5.x</td>
<td style="text-align:left">List of <a href="https://databrickslabs.github.io/overwatch/dataengineer/modules/">modules</a> in scope for the run. It&rsquo;s important to note that there are many co-dependencies. When choosing a module, be sure to also enable it&rsquo;s requisites. If not value provided, all modules will execute.</td>
</tr>
<tr>
<td style="text-align:left"><strong>maxDaysToLoad</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">60</td>
<td style="text-align:left">Int</td>
<td style="text-align:left">0.5.x</td>
<td style="text-align:left">On large, busy workspaces 60 days of data may amount in 10s of TB of raw data. This parameter allows the job to be broken out into several smaller runs. Pipeline will load previous pipeline end time (or primordial_date if first_run) until lesser of [current timestamp or previous pipeline end time + maxDaysToLoad]. Ex: 1 year historical load, first run, don&rsquo;t want to load full year, set maxDaysToLoad to 14 to test / validate load, when that works increase to 60 or 365 depending on confidence level and data size.</td>
</tr>
<tr>
<td style="text-align:left"><strong>primordialDateString</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">Today&rsquo;s date minus 60 days, format = &ldquo;yyyy-mm-dd&rdquo;</td>
<td style="text-align:left">String</td>
<td style="text-align:left">0.5.x</td>
<td style="text-align:left">Date from which data collection was to begin. This is the earliest date for which data should attempted to be collected.</td>
</tr>
<tr>
<td style="text-align:left"><strong>databricksContractPrices</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">DatabricksContractPrices()</td>
<td style="text-align:left"><a href="#databrickscontractprices">DatabricksContractPrices</a></td>
<td style="text-align:left">0.5.x</td>
<td style="text-align:left">Allows the user to globally configure Databricks contract prices to improve dollar cost estimates where referenced. Additionally, these values will be added to the <em>instanceDetails</em> consumer table for custom use. They are also available in com.databricks.labs.overwatch.utils.DBContractPrices().</td>
</tr>
<tr>
<td style="text-align:left"><strong>IntelligentScaling</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">IntelligentScaling()</td>
<td style="text-align:left"><a href="#intelligentscaling">IntelligentScaling</a></td>
<td style="text-align:left">0.5.x</td>
<td style="text-align:left">Until further notice, recommend this to be disabled. Intelligent scaling is being re-examined as of 0.6.1.2</td>
</tr>
<tr>
<td style="text-align:left"><strong>workspace_name</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">&lt;organization_id&gt;</td>
<td style="text-align:left">Option[String]</td>
<td style="text-align:left">0.6.x</td>
<td style="text-align:left">Allows the user to specify the workspace_name to be different than the default, canonical workspace_id (i.e. organization_id). This is helpful during analysis as it provides a human-legible reference for the workspace</td>
</tr>
<tr>
<td style="text-align:left"><strong>externalizeOptimize</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">false</td>
<td style="text-align:left">Boolean</td>
<td style="text-align:left">0.6.x</td>
<td style="text-align:left">Allows the user to externalize the optimize and zorders done on the delta tables. This can be run as a secondary job with different cluster configs at different intervals increasing efficiency</td>
</tr>
<tr>
<td style="text-align:left"><strong>tempWorkingDir</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left"><!-- raw HTML omitted -->/tempWorkingDir/&lt;organization_id&gt;</td>
<td style="text-align:left">String</td>
<td style="text-align:left">0.6.1</td>
<td style="text-align:left">Provides ability to override temporary working directory. This directory gets cleaned up before and after each run.</td>
</tr>
<tr>
<td style="text-align:left"><strong>apiEnvConfig</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">ApiEnvConfig()</td>
<td style="text-align:left">Option<a href="#apienvconfig">[ApiEnvConfig]</a></td>
<td style="text-align:left">0.7.x</td>
<td style="text-align:left">Allows the user to configure api calls.</td>
</tr>
</tbody>
</table>
<h3 id="auditlogconfig">AuditLogConfig</h3>
<p>Config to point Overwatch to the location of the delivered audit logs</p>
<table>
<thead>
<tr>
<th style="text-align:left">Config</th>
<th style="text-align:left">Required Override</th>
<th style="text-align:left">Default Value</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>rawAuditPath</strong></td>
<td style="text-align:left">Y</td>
<td style="text-align:left">None</td>
<td style="text-align:left">Option[String]</td>
<td style="text-align:left">Top-level path to directory containing workspace audit logs delivered by Databricks. The Overwatch user must have read access to this path</td>
</tr>
<tr>
<td style="text-align:left"><strong>auditLogFormat</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">json</td>
<td style="text-align:left">String</td>
<td style="text-align:left">AWS ONLY - When using AWS and audit logs are delivered in a format other than json (default) this can be changed to reflect the audit log source data type. Supported types are json, parquet, delta</td>
</tr>
<tr>
<td style="text-align:left"><strong>azureAuditLogEventhubConfig</strong></td>
<td style="text-align:left">Y (only on Azure)</td>
<td style="text-align:left">None</td>
<td style="text-align:left">Option<a href="#azureauditlogeventhubconfig">AzureAuditLogEventhubConfig</a></td>
<td style="text-align:left">Required configuration when using Azure as Azure must deliver audit logs via LogAnalytics via Eventhub</td>
</tr>
</tbody>
</table>
<h3 id="tokensecret">TokenSecret</h3>
<p>Overwatch must have permission to perform its functions; these are further discussed in <a href="https://databrickslabs.github.io/overwatch/dataengineer/advancedtopics/">AdvancedTopics</a>.
The token secret stores the Databricks Secret scope / key for Overwatch to retrieve. The key should store the
token secret to be used which usually starts with &ldquo;dapi&hellip;&rdquo;</p>
<p>If no TokenSecret is passed into the config, the operation owner&rsquo;s token will be used. If Overwatch is being
executed in a notebook the notebook user&rsquo;s token will be used. If Overwatch is being executed through a job the
token of the job owner will be used. Whatever token is used, it must have the appropriate access or it will result
in missing data, or an Overwatch run failure.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Config</th>
<th style="text-align:left">Required Override</th>
<th style="text-align:left">Default Value</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>scope</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">NA</td>
<td style="text-align:left">String</td>
<td style="text-align:left">Databricks secret scope</td>
</tr>
<tr>
<td style="text-align:left"><strong>key</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">NA</td>
<td style="text-align:left">String</td>
<td style="text-align:left">Databricks secret key within the scope defined in the Scope parameter</td>
</tr>
</tbody>
</table>
<h3 id="datatarget">DataTarget</h3>
<p>Where to create the database and what to call it. This must be defined on first run or Overwatch will create a
database named &ldquo;Overwatch&rdquo; at the default location which is &ldquo;/user/hive/warehouse/overwatch.db&rdquo;. This is challenging
to change later, so be sure you choose a good starting point. After the initial run, this must not change without
and entire <a href="https://databrickslabs.github.io/overwatch/dataengineer/advancedtopics/">database migration</a>. Overwatch can perform destructive tasks within its own database and
this is how it protects itself against harming existing data. Overwatch creates specific metadata inside the database
at creation time to ensure the database is created and owned by the Overwatch process. Furthermore, metadata is
managed to track schema versions and other states.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Config</th>
<th style="text-align:left">Required Override</th>
<th style="text-align:left">Default Value</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>databaseName</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">Overwatch</td>
<td style="text-align:left">Option[String]</td>
<td style="text-align:left">Name of the primary database to be created on first run or to which will be appended on subsequent runs. This database is typically used as the ETL database only as the consumer database is also usually specified to have a different name. If consumerDatabase is also specified in the configuration, on the ETL entities will be stored in this datbase.</td>
</tr>
<tr>
<td style="text-align:left"><strong>databaseLocation</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">/user/hive/warehouse/{databaseName}.db</td>
<td style="text-align:left">Option[String]</td>
<td style="text-align:left">Location of the Overwatch database. Any compatible fully-qualified URI can be used here as long as Overwatch has access to write the target. Most customers, however, mount the qualified path and reference the mount point for simplicity but this is not required and may not be possible depending on security requirements and environment.</td>
</tr>
<tr>
<td style="text-align:left"><strong>etlDataPathPrefix</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">{databaseLocation}</td>
<td style="text-align:left">Option[String]</td>
<td style="text-align:left">The location the data will actually be stored. This is critical as data (even EXTERNAL) stored underneath a database path can be deleted if a user call drop database or drop database cascade. This is even more significant when working with multiple workspaces as the risk increases with the breadth of access.</td>
</tr>
<tr>
<td style="text-align:left"><strong>consumerDatabaseName</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">{databaseName}</td>
<td style="text-align:left">Option[String]</td>
<td style="text-align:left">Will be the same as the databaseName if not otherwise specified. Holds the user-facing entities and separates them from all the intermediate ETL entities for a less cluttered experience, easy-to-find entities, and simplified security.</td>
</tr>
<tr>
<td style="text-align:left"><strong>ConsumerDatabaseLocation</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">/user/hive/warehouse/{consumerDatabaseName}.db</td>
<td style="text-align:left">Option[String]</td>
<td style="text-align:left"><em>See databaseLocation above</em></td>
</tr>
</tbody>
</table>
<h3 id="azureauditlogeventhubconfig">AzureAuditLogEventhubConfig</h3>
<p>Not Required when using AWS <!-- raw HTML omitted -->
Eventhub streaming environment configurations</p>
<table>
<thead>
<tr>
<th style="text-align:left">Config</th>
<th style="text-align:left">Required Override</th>
<th style="text-align:left">Default Value</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>connectionString</strong></td>
<td style="text-align:left">Y</td>
<td style="text-align:left">NA</td>
<td style="text-align:left">String</td>
<td style="text-align:left">Should be stored in a secret. The value format here should be {{secrets/scope/key}}. Replace <em>scope</em> and <em>key</em> with the names of the scope and key where the EventHub connection string with primary key is stored.</td>
</tr>
<tr>
<td style="text-align:left"><strong>eventHubName</strong></td>
<td style="text-align:left">Y</td>
<td style="text-align:left">NA</td>
<td style="text-align:left">String</td>
<td style="text-align:left">Retrieve from Azure Portal Event Hub</td>
</tr>
<tr>
<td style="text-align:left"><strong>auditRawEventsPrefix</strong></td>
<td style="text-align:left">Y</td>
<td style="text-align:left">NA</td>
<td style="text-align:left">String</td>
<td style="text-align:left">Path prefix for checkpoint directories</td>
</tr>
<tr>
<td style="text-align:left"><strong>maxEventsPerTrigger</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">10000</td>
<td style="text-align:left">Int</td>
<td style="text-align:left">Events to pull for each trigger, this should be increased during initial cold runs or runs that have very large numbers of audit log events.</td>
</tr>
<tr>
<td style="text-align:left"><strong>minEventsPerTrigger</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">10</td>
<td style="text-align:left">Int</td>
<td style="text-align:left">Large workspaces can send events faster than batches can complete thus a minimum threshold for new events is needed. Optional override as of v0603</td>
</tr>
<tr>
<td style="text-align:left"><strong>auditRawEventsChk</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">{auditRawEventsPrefix}/rawEventsCheckpoint</td>
<td style="text-align:left">Option[String]</td>
<td style="text-align:left">Checkpoint Directory name for the raw dump of events from Eventhub. This directory gets overwritten upon successful pull into Overwatch.</td>
</tr>
<tr>
<td style="text-align:left"><strong>auditLogChk</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">{auditRawEventsPrefix}/auditLogBronzeCheckpoint</td>
<td style="text-align:left">Option[String]</td>
<td style="text-align:left"><strong>DEPRECATED</strong> Checkpoint Directory name for the audit log stream target. This target will continuously grow as more audit logs are created and delivered</td>
</tr>
</tbody>
</table>
<h3 id="databrickscontractprices">DatabricksContractPrices</h3>
<table>
<thead>
<tr>
<th style="text-align:left">Config</th>
<th style="text-align:left">Required Override</th>
<th style="text-align:left">Default Value</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>interactiveDBUCostUSD</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">0.56</td>
<td style="text-align:left">Double</td>
<td style="text-align:left">Approximate list price of interactive DBU</td>
</tr>
<tr>
<td style="text-align:left"><strong>automatedDBUCostUSD</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">0.26</td>
<td style="text-align:left">Double</td>
<td style="text-align:left">Approximate list price of automated DBU</td>
</tr>
<tr>
<td style="text-align:left"><strong>sqlComputeDBUCostUSD</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">0.22</td>
<td style="text-align:left">Double</td>
<td style="text-align:left">Approximate list price of DatabricksSQL DBU</td>
</tr>
<tr>
<td style="text-align:left"><strong>jobsLightDBUCostUSD</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">0.10</td>
<td style="text-align:left">Double</td>
<td style="text-align:left">Approximate list price of JobsLight Automated DBU</td>
</tr>
</tbody>
</table>
<h3 id="intelligentscaling">IntelligentScaling</h3>
<p>Until further notice, recommend this to be disabled. Intelligent scaling is being re-examined as of 0.6.1.2</p>
<table>
<thead>
<tr>
<th style="text-align:left">Config</th>
<th style="text-align:left">Required Override</th>
<th style="text-align:left">Default Value</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>enabled</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">false</td>
<td style="text-align:left">Double</td>
<td style="text-align:left">Approximate list price of interactive DBU</td>
</tr>
<tr>
<td style="text-align:left"><strong>minimumCores</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">4</td>
<td style="text-align:left">Int</td>
<td style="text-align:left">Minimum number of cores to be used during Overwatch run</td>
</tr>
<tr>
<td style="text-align:left"><strong>maximumCores</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">512</td>
<td style="text-align:left">Int</td>
<td style="text-align:left">Maximum number of cores to be used during Overwatch run</td>
</tr>
<tr>
<td style="text-align:left"><strong>coeff</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">1.0</td>
<td style="text-align:left">Double</td>
<td style="text-align:left">Scaler, each module has a scale based on it&rsquo;s size relative to the other modules. This variable acts as a scaler to the scaler, if the modules are scaling too fast (or not fast enough), this can be tweaked to increase the variability of the scaling from the starting core count.</td>
</tr>
</tbody>
</table>
<h3 id="apienvconfig">ApiEnvConfig</h3>
<p>Configurations of Api calls.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Config</th>
<th style="text-align:left">Required Override</th>
<th style="text-align:left">Default Value</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>successBatchSize</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">200</td>
<td style="text-align:left">Int</td>
<td style="text-align:left">Responce of successful api calls are stored into the disk.This config signifies the batch size.</td>
</tr>
<tr>
<td style="text-align:left"><strong>errorBatchSize</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">500</td>
<td style="text-align:left">Int</td>
<td style="text-align:left">Failed api calls are stored into disk.This config signifies the batch size of failed api calls.</td>
</tr>
<tr>
<td style="text-align:left"><strong>enableUnsafeSSL</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">false</td>
<td style="text-align:left">Boolean</td>
<td style="text-align:left">Enable unasfe SSL.</td>
</tr>
<tr>
<td style="text-align:left"><strong>threadPoolSize</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">4</td>
<td style="text-align:left">Int</td>
<td style="text-align:left">Number of threads to perform api calls in parallel.</td>
</tr>
<tr>
<td style="text-align:left"><strong>apiWaitingTime</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">300000</td>
<td style="text-align:left">milliseconds</td>
<td style="text-align:left">Api waiting time incase of delay in response.</td>
</tr>
<tr>
<td style="text-align:left"><strong>apiProxyConfig</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">ApiProxyConfig()</td>
<td style="text-align:left">Option<a href="#apiproxyconfig">[ApiProxyConfig]</a></td>
<td style="text-align:left">Allows user to configure proxy.</td>
</tr>
</tbody>
</table>
<h3 id="apiproxyconfig">ApiProxyConfig</h3>
<p>Configurations of proxy.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Config</th>
<th style="text-align:left">Required Override</th>
<th style="text-align:left">Default Value</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>proxyHost</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">None</td>
<td style="text-align:left">Option[String]</td>
<td style="text-align:left">Proxy host.</td>
</tr>
<tr>
<td style="text-align:left"><strong>proxyPort</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">None</td>
<td style="text-align:left">Option[Int]</td>
<td style="text-align:left">Proxy port.</td>
</tr>
<tr>
<td style="text-align:left"><strong>proxyUserName</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">None</td>
<td style="text-align:left">Option[String]</td>
<td style="text-align:left">Proxy user name.</td>
</tr>
<tr>
<td style="text-align:left"><strong>proxyPasswordScope</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">None</td>
<td style="text-align:left">Option[String]</td>
<td style="text-align:left">Secret Scope which contain key for password.</td>
</tr>
<tr>
<td style="text-align:left"><strong>proxyPasswordKey</strong></td>
<td style="text-align:left">N</td>
<td style="text-align:left">None</td>
<td style="text-align:left">Option[String]</td>
<td style="text-align:left">Key for password(This should be present in the secret scope).</td>
</tr>
</tbody>
</table>


<footer class="footline">
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="https://databrickslabs.github.io/overwatch/deployoverwatch/configureoverwatch/validation/" title="Validation"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="https://databrickslabs.github.io/overwatch/deployoverwatch/runningoverwatch/" title="Running Overwatch" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="https://databrickslabs.github.io/overwatch/js/clipboard.min.js?1682437462"></script>
    <script src="https://databrickslabs.github.io/overwatch/js/perfect-scrollbar.min.js?1682437462"></script>
    <script src="https://databrickslabs.github.io/overwatch/js/perfect-scrollbar.jquery.min.js?1682437462"></script>
    <script src="https://databrickslabs.github.io/overwatch/js/jquery.sticky.js?1682437462"></script>
    <script src="https://databrickslabs.github.io/overwatch/js/featherlight.min.js?1682437462"></script>
    <script src="https://databrickslabs.github.io/overwatch/js/highlight.pack.js?1682437462"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://databrickslabs.github.io/overwatch/js/modernizr.custom-3.6.0.js?1682437462"></script>
    <script src="https://databrickslabs.github.io/overwatch/js/learn.js?1682437462"></script>
    <script src="https://databrickslabs.github.io/overwatch/js/hugo-learn.js?1682437462"></script>

    <link href="https://databrickslabs.github.io/overwatch/mermaid/mermaid.css?1682437462" rel="stylesheet" />
    <script src="https://databrickslabs.github.io/overwatch/mermaid/mermaid.js?1682437462"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

