<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.76.5" />
    <meta name="description" content="Overwatch Documentation">
<meta name="author" content="Daniel Tomes -- DatabricksLabs">

    <link rel="icon" href="https://databrickslabs.github.io/overwatch/images/favicon.png" type="image/png">

    <title>FAQ :: Overwatch</title>

    
    <link href="https://databrickslabs.github.io/overwatch/css/nucleus.css?1628255527" rel="stylesheet">
    <link href="https://databrickslabs.github.io/overwatch/css/fontawesome-all.min.css?1628255527" rel="stylesheet">
    <link href="https://databrickslabs.github.io/overwatch/css/hybrid.css?1628255527" rel="stylesheet">
    <link href="https://databrickslabs.github.io/overwatch/css/featherlight.min.css?1628255527" rel="stylesheet">
    <link href="https://databrickslabs.github.io/overwatch/css/perfect-scrollbar.min.css?1628255527" rel="stylesheet">
    <link href="https://databrickslabs.github.io/overwatch/css/auto-complete.css?1628255527" rel="stylesheet">
    <link href="https://databrickslabs.github.io/overwatch/css/atom-one-dark-reasonable.css?1628255527" rel="stylesheet">
    <link href="https://databrickslabs.github.io/overwatch/css/theme.css?1628255527" rel="stylesheet">
    <link href="https://databrickslabs.github.io/overwatch/css/hugo-theme.css?1628255527" rel="stylesheet">
    
    <link href="https://databrickslabs.github.io/overwatch/css/theme-blue.css?1628255527" rel="stylesheet">
    
    

    <script src="https://databrickslabs.github.io/overwatch/js/jquery-3.3.1.min.js?1628255527"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    

<script async defer src="https://buttons.github.io/buttons.js"></script>
  </head>
  <body class="" data-url="https://databrickslabs.github.io/overwatch/faq/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://databrickslabs.github.io/overwatch/">
    <img src="https://databrickslabs.github.io/overwatch/images/tmp_logo4.png", width="85%">
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="https://databrickslabs.github.io/overwatch/js/lunr.min.js?1628255527"></script>
<script type="text/javascript" src="https://databrickslabs.github.io/overwatch/js/auto-complete.js?1628255527"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/databrickslabs.github.io\/overwatch\/";
    
</script>
<script type="text/javascript" src="https://databrickslabs.github.io/overwatch/js/search.js?1628255527"></script>

    
  </div>
  
  <section id="homelinks">
    <ul>
      <li>
        <a class="padding" href='https://databrickslabs.github.io/overwatch/'><i class='fas fa-home'></i> Home</a>
      </li>
    </ul>
  </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/gettingstarted/" title="Getting Started" class="dd-item
        
        
        
        ">
      <a href="https://databrickslabs.github.io/overwatch/gettingstarted/">
          Getting Started
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/gettingstarted/configuration/" title="Configuration" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/gettingstarted/configuration/">
        Configuration
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/gettingstarted/modules/" title="Modules" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/gettingstarted/modules/">
        Modules
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/gettingstarted/advancedtopics/" title="Advanced Topics" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/gettingstarted/advancedtopics/">
        Advanced Topics
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/environmentsetup/" title="Environment Setup" class="dd-item
        
        
        
        ">
      <a href="https://databrickslabs.github.io/overwatch/environmentsetup/">
          Environment Setup
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/environmentsetup/azure/" title="Azure" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/environmentsetup/azure/">
        Azure
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/environmentsetup/aws/" title="AWS" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/environmentsetup/aws/">
        AWS
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/dataengineer/" title="Data Engineering" class="dd-item
        
        
        
        ">
      <a href="https://databrickslabs.github.io/overwatch/dataengineer/">
          Data Engineering
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/dataengineer/definitions/" title="Definitions" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/dataengineer/definitions/">
        Definitions
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dataengineer/etl_process/" title="ETL Process" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/dataengineer/etl_process/">
        ETL Process
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dataengineer/upgrade/" title="Upgrade" class="dd-item ">
        <a href="https://databrickslabs.github.io/overwatch/dataengineer/upgrade/">
        Upgrade
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/changelog/" title="ChangeLog" class="dd-item
        
        
        
        ">
      <a href="https://databrickslabs.github.io/overwatch/changelog/">
          ChangeLog
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/faq/" title="FAQ" class="dd-item
        parent
        active
        
        ">
      <a href="https://databrickslabs.github.io/overwatch/faq/">
          FAQ
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/contributing/" title="" class="dd-item
        
        
        
        ">
      <a href="https://databrickslabs.github.io/overwatch/contributing/">
          
          
      </a>
      
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="footer">
      <center>

    
    <a class="github-button" href="https://github.com/databrickslabs/overwatch/subscription"
       data-icon="octicon-eye" data-show-count="true" aria-label="Watch Overwatch on GitHub">Watch</a>


    <a class="github-button" href="https://github.com/databrickslabs/overwatch" data-icon="octicon-star" data-show-count="true" aria-label="Star databrickslabs/overwatch on GitHub">Star</a>


    <a class="github-button" href="https://github.com/databrickslabs/overwatch/fork"
       data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork Overwatch on GitHub">Fork</a>

    <p>A <a href="https://github.com/databrickslabs">Databricks Labs</a> project.</p>
</center>

<script async defer src="https://buttons.github.io/buttons.js"></script>
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            <a href='https://databrickslabs.github.io/overwatch/'>Welcome To OverWatch</a> > FAQ
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#using-the-faqs">Using the FAQs</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              FAQ
            </h1>
          

        



	<h2 id="using-the-faqs">Using the FAQs</h2>
<p>The answers and examples to the questions below assume that a workspace is instantiated and ready to use. 
There are many ways to instantiate a workspace, below is a simple way but it doesn&rsquo;t matter how you create the 
Workspace, just so long as the state of the workspace and/or pipeline can be referenced and utilized. 
A simple example is below. There are much more verbose details in the 
<a href="https://databrickslabs.github.io/overwatch/gettingstarted/advancedtopics//#interacting-with-overwatch-and-its-state">Advanced Topics Section</a> 
if you&rsquo;d like a deeper explanation.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#66d9ef">import</span> com.databricks.labs.overwatch.utils.Upgrade
<span style="color:#66d9ef">import</span> com.databricks.labs.overwatch.pipeline.Initializer
<span style="color:#66d9ef">val</span> params <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">OverwatchParams</span><span style="color:#f92672">(...)</span>
<span style="color:#66d9ef">val</span> prodArgs <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">JsonUtils</span><span style="color:#f92672">.</span>objToJson<span style="color:#f92672">(</span>params<span style="color:#f92672">).</span>compactString

<span style="color:#75715e">// A more verbose example is available in the example notebooks referenced above
</span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> prodWorkspace <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Initializer</span><span style="color:#f92672">(</span>prodArgs<span style="color:#f92672">,</span> debugFlag <span style="color:#66d9ef">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">)</span>
<span style="color:#66d9ef">val</span> upgradeReport <span style="color:#66d9ef">=</span> <span style="color:#a6e22e">Upgrade</span><span style="color:#f92672">.</span>upgradeTo042<span style="color:#f92672">(</span>prodWorkspace<span style="color:#f92672">)</span>
display<span style="color:#f92672">(</span>upgradeReport<span style="color:#f92672">)</span>
</code></pre></div><p><strong>Q 1: I just deployed Overwatch and made a mistake and just want to clean up everything and re-deploy. I can&rsquo;t 
seem to get a clean state from which to begin though.</strong></p>
<p><strong>A 1</strong>: Overwatch tables are intentionally created as external tables. When the 
<a href="https://databrickslabs.github.io/overwatch/gettingstarted/configuration//#datatarget">etlDataPathPrefix</a> is configured (as recommended) 
the target data does not live underneath the database directory and as such is not deleted when the database is dropped. 
This is considered an &ldquo;external table&rdquo; and this is done by design to protect the org from someone accidentally dropping 
all data globally. For a FULL cleanup you may use the functions below but these are destructive, be sure that 
you review it and fully understand it before you run it.</p>

<div class="notices warning" ><p><strong>CRITICAL</strong>: <strong>CHOOSE THE CORRECT FUNCTION FOR YOUR ENVIRONMENT</strong>
If Overwatch is configured on multiple workspaces, use the multi-workspace script otherwise, use the 
single workspace functions. Please do not remove the safeguards as they are there to protect you and your company from 
accidents.</p>
</div>

<p><strong>SINGLE WORKSPACE DEPLOYMENT DESTROY AND REBUILD</strong></p>
<p><a href="https://databrickslabs.github.io/overwatch/assets/FAQ/single_workspace_cleanup.dbc">single_workspace_cleanup.dbc</a> | 
<a href="https://databrickslabs.github.io/overwatch/assets/FAQ/single_workspace_cleanup.html">single_workspace_cleanup.html</a></p>
<p><strong>MULTI WORKSPACE DEPLOYMENT DESTROY AND REBUILD</strong></p>
<p>First off, don&rsquo;t practice deploy a workspace to the global Overwatch data target as it&rsquo;s challenging to clean-up; 
nonetheless, the script below will remove the data from this workspace from the global dataset and reset this 
workspace for a clean run.</p>
<p><a href="https://databrickslabs.github.io/overwatch/assets/FAQ/multi_workspace_cleanup.dbc">multi_workspace_cleanup.dbc</a> |
<a href="https://databrickslabs.github.io/overwatch/assets/FAQ/multi_workspace_cleanup.html">multi_workspace_cleanup.html</a></p>
<p><strong>Q 2: The incorrect costs were entered for a specific time range, I&rsquo;d like to correct them, how should I do that?</strong></p>
<p><strong>A 2</strong>: Please refer to the <a href="https://databrickslabs.github.io/overwatch/gettingstarted/#configuring-custom-costs">Configuring Custom Costs</a> 
to baseline your understanding. Also, closely review the details of the 
<a href="https://databrickslabs.github.io/overwatch/dataengineer/definitions//#instancedetails">instanceDetails</a>
table definition as that&rsquo;s where costs are stored and this is what will need to be accurate. Lastly, 
please refer to the <a href="https://databrickslabs.github.io/overwatch/dataengineer/etl_process/">ETL_Process</a> section of the docs as 
you&rsquo;ll likely need to understand how to move the pipeline through time.</p>
<p>Now that you have a good handle on the costs and the process for restoring / reloading data, note that there are 
ultimately two options after you reconfigure the instancedetails table to be accurate. There are two tables that 
are going to have inaccurate data in them:</p>
<ul>
<li>jobruncostpotentialfact_gold</li>
<li>clusterstatefact</li>
</ul>
<p><strong>Options</strong></p>
<ol>
<li>Completely drop tables, delete their underlying data and rebuild them from the primordial date</li>
<li>Delete all records where Pipeline_SnapTS &gt;= the time where the data became inaccurate.</li>
</ol>
<p>Both options will require a corresponding appropriate update to the pipeline_report table for the two modules 
that write to those tables (3005, 3015). <a href="https://databrickslabs.github.io/overwatch/dataengineer/etl_process//#reloading-data-example">Here are several examples</a>
on ways to update the pipeline_report to change update the state of a module.</p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="https://databrickslabs.github.io/overwatch/changelog/" title="ChangeLog"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="https://databrickslabs.github.io/overwatch/contributing/" title="" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="https://databrickslabs.github.io/overwatch/js/clipboard.min.js?1628255527"></script>
    <script src="https://databrickslabs.github.io/overwatch/js/perfect-scrollbar.min.js?1628255527"></script>
    <script src="https://databrickslabs.github.io/overwatch/js/perfect-scrollbar.jquery.min.js?1628255527"></script>
    <script src="https://databrickslabs.github.io/overwatch/js/jquery.sticky.js?1628255527"></script>
    <script src="https://databrickslabs.github.io/overwatch/js/featherlight.min.js?1628255527"></script>
    <script src="https://databrickslabs.github.io/overwatch/js/highlight.pack.js?1628255527"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://databrickslabs.github.io/overwatch/js/modernizr.custom-3.6.0.js?1628255527"></script>
    <script src="https://databrickslabs.github.io/overwatch/js/learn.js?1628255527"></script>
    <script src="https://databrickslabs.github.io/overwatch/js/hugo-learn.js?1628255527"></script>

    <link href="https://databrickslabs.github.io/overwatch/mermaid/mermaid.css?1628255527" rel="stylesheet" />
    <script src="https://databrickslabs.github.io/overwatch/mermaid/mermaid.js?1628255527"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>
